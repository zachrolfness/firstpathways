
<div *ngIf="auth.isLoggedIn">

<hr/>

<div class="container-fluid">
<div class="row">

<nav class="col-sm-3 col-md-2 hidden-xs-down bg-faded sidebar">
<ul class="nav nav-pills flex-column nav-stacked" style="background-color:#003974; padding: 4px">
	<li class="nav-item" style="width:100%">
		<a class="nav-link buttontab" href="profile">Profile</a>
	</li>
	<li class="nav-item">
		<a class="nav-link buttontab" href="myteams">My Teams</a>
	</li>
	<li class="nav-item">
		<a class="nav-link buttontab" href="myresources">My Resources</a>
	</li>
	<li class="nav-item buttontab">
		<a class="nav-link buttontab" href="social">Social</a>
	</li>
	<li class="nav-item buttontab">
		<a class="nav-link buttontab" href="settings">Settings</a>
	</li>
</ul>
</nav>

<main class="col-sm-9 offset-sm-3 col-md-10 offset-md-2 pt-3" style="width:80%">

	<h1>User Dashboard</h1>
	<div class="row">

	<div class="col-5">
		<div *ngIf="!edit">
			<img [src]="(User | async)?.PhotoURL" alt="Display Photo" class="img-thumbnail rounded">
		</div>
		<div *ngIf="edit">
			<label for="photoURL">Photo URL</label>
			<input #photo id="photoURL" type="text" class="form-control" [ngModel]="(User | async)?.PhotoURL" (onblur)="saveUserPhoto(photoUrl.value)">
		</div>
	</div>

	<div class="col-7">
		<div class="row">
			<div class="col-8">
				<h1>{{(User | async)?.Name}}</h1>
			</div>
			<div class="col-4">
				<button (click)="toggleEdit()" class="btn btn-outline-primary">
					<div *ngIf="edit">
						View
					</div>
					<div *ngIf="!edit">
						Edit
					</div>
				</button>
			</div>
		</div>


		<div *ngIf="!edit">
			<br />
			Bio:
			<br/>
			<p>{{(User | async)?.Bio}}</p>
		</div>
		<div *ngIf="edit">
			<label for="bio">Bio</label>
			<textarea #bio id="bio" cols="30" rows="10" class="form-control" [ngModel]="(User | async)?.Bio" (blur)="saveUserBio(bio.value)">
			</textarea>
		</div>

		Website:

		<div *ngIf="!edit">
			<a [href]="(User | async)?.Website" target="_blank">
				{{(User | async)?.Website}}
			</a>
		</div>
		<div *ngIf="edit">
			<input #website type="text" class="form-control" [ngModel]="(User | async)?.Website" (blur)="saveUserWebsite(website.value)">
		</div>
	</div>
	</div>

	<br />

	<ul class="nav nav-pills nav-justified">
		<li class="nav-item">
			<a class="nav-link" [class.active]="isActive" (click)="setActive(true)">Pathway Teams</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" [class.active]="!isActive" (click)="setActive(false)">Created Resources</a>
		</li>
	</ul>

	<br />

	<div class="tab-content">
		<div class="tab-pane" id="teams" role="tabpanel" [class.active]="isActive">
			<h3>Pathway Teams</h3>
			<div *ngIf="!edit">
				<table class="table">
					<thead>
						<tr>
							<th>Team Name</th>
							<th>Team Number</th>
							<th>FIRST Branch</th>
							<th>School</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let Team of (User | async)?.PathwayTeams">
							<th>{{Team.Name}}</th>
							<th>{{Team.Number}}</th>
							<th>{{Team.Branch}}</th>
							<th>{{Team.School}}</th>
						</tr>
					</tbody>
				</table>
			</div>
			<div *ngIf="edit">
				<table class="table">
					<thead>
						<tr>
							<th>Team Name</th>
							<th>Team Number</th>
							<th>FIRST Branch</th>
							<th>School</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let Team of PathwayTeams | async">
							<th>
								<input #name type="text" class="form-control" [ngModel]="Team.Name">
							</th>
							<th>
								<input #number type="text" class="form-control" [ngModel]="Team.Number">
							</th>
							<th>
								<input #branch type="text" class="form-control" [ngModel]="Team.Branch">
							</th>
							<th>
								<input #school type="text" class="form-control" [ngModel]="Team.School">
							</th>
							<th>
								<button type="button" class="btn btn-outline-primary" (click)="saveTeam(Team.$key, name.value, number.value, branch.value, school.value)">
									Save
								</button>
								<button type="button" class="btn btn-outline-primary" (click)="removeTeam(Team.$key)">
									Remove
								</button>
							</th>
						</tr>
						<tr>
							<th>
								<input type="text" class="form-control" [(ngModel)]="team.name">
							</th>
							<th>
								<input type="text" class="form-control" [(ngModel)]="team.number">
							</th>
							<th>
								<input type="text" class="form-control" [(ngModel)]="team.branch">
							</th>
							<th>
								<input type="text" class="form-control" [(ngModel)]="team.school">
							</th>
							<th>
								<button type="button" class="btn btn-outline-primary" (click)="addTeam()">
									Add
								</button>
							</th>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div class="tab-pane" id="resources" role="tabpanel" [class.active]="!isActive">
			<h3>Created Resources</h3>
		</div>
	</div>

</main>

</div>
</div>
</div>
